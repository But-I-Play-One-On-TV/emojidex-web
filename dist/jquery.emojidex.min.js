/*
 *  jQuery Emojidex - v0.1.0
 *  emojidex coffee plugin for jQuery/Zepto and compatible
 *  https://github.com/Genshin/emojidex-coffee#emojidex-coffee
 *
 *  Made by Genshin
 *  Under LGPL License
 */
(function(){!function(a){var b,c,d;return d="emojidex",c={},b=function(){function b(b,e){this.element=b,this.options=a.extend({},c,e),this._defaults=c,this._name=d,this.loadEmojidexJSON(this.element,this.options),this.setEmojiarea(this.options)}return b.prototype.loadEmojidexJSON=function(c,d){return a.emojiarea.path=d.path_img,a.getJSON(d.path_json,function(d){return a.emojiarea.icons=d,b.prototype.setEmojiIconForUTF(d,c),b.prototype.setEmojiIconForCode(d,c)})},b.prototype.setEmojiIconForUTF=function(b,c){return a.each(a(c),function(c,d){var e,f,g,h,i,j,k;i=d.innerHTML;for(e in b)for(g=b[e],j=0,k=g.length;k>j;j++)f=g[j],h=new RegExp(f.moji,"g"),i=i.replace(h,function(){return'<img src="'+a.emojiarea.path+f.name+'.svg" alt="'+f.name+'"></img>'});return d.innerHTML=i})},b.prototype.setEmojiIconForCode=function(b,c){var d;return d=a.emojiarea.path,d.length&&"/"!==d.charAt(d.length-1)&&(d+="/"),a.each(a(c),function(a,c){var e;return e=c.innerHTML.replace(/:[\-\w]+:/g,function(a){var c,e,f,g,h,i;g=a;for(c in b)for(f=b[c],h=0,i=f.length;i>h;h++)if(e=f[h],a=a.replace(/:/g,""),e.name===a){g='<img src="'+d+a+'.svg" alt="'+a+'"></img>';break}return g}),c.innerHTML=e})},b.prototype.setEmojiarea=function(b){return b.emojiarea.plaintext.emojiarea({wysiwyg:!1}),b.emojiarea.wysiwyg.emojiarea({wysiwyg:!0}),b.emojiarea.wysiwyg.on("change",function(){return b.emojiarea.value_output.text(a(this).val())}),b.emojiarea.wysiwyg.trigger("change")},b}(),a.fn[d]=function(c){return this.each(function(){return a.data(this,"plugin_"+d)?void 0:a.data(this,"plugin_"+d,new b(this,c))})}}(jQuery,window,document)}).call(this);