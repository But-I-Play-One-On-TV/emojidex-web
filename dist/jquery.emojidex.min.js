/*
 *  jQuery Emojidex - v0.1.0
 *  emojidex coffee plugin for jQuery/Zepto and compatible
 *  https://github.com/Genshin/emojidex-coffee#emojidex-coffee
 *
 *  Made by Genshin
 *  Under LGPL License
 */
(function(){!function(a){var b,c,d;return d="emojidex",c={},b=function(){function b(b,e){this.element=b,this.options=a.extend({},c,e),this._defaults=c,this._name=d,this.loadEmojidexJSON(this.element,this.options),this.setEmojiarea(this.options)}return b.prototype.loadEmojidexJSON=function(c,d){return a.emojiarea.path=d.path_img,a.getJSON(d.path_json,function(d){return a.emojiarea.icons=d,b.prototype.setEmojiCSS(d),b.prototype.setEmojiIconForUTF(d,c),b.prototype.setEmojiIconForCode(d,c)})},b.prototype.setEmojiCSS=function(b){var c,d,e,f,g,h;e=a('<style type="text/css" />');for(c in b)for(f=b[c],g=0,h=f.length;h>g;g++)d=f[g],e.append("i.emojidex-"+d.moji+" {background-image: url('"+a.emojiarea.path+d.name+".svg')}");return a("head").append(e)},b.prototype.setEmojiIconForUTF=function(b,c){return a.each(a(c),function(a,c){var d,e,f,g,h,i,j;h=c.innerHTML;for(d in b)for(f=b[d],i=0,j=f.length;j>i;i++)e=f[i],g=new RegExp(e.moji,"g"),h=h.replace(g,function(){return'<i class="emojidex-'+e.moji+'"></i>'});return c.innerHTML=h})},b.prototype.setEmojiIconForCode=function(b,c){return a.each(a(c),function(a,c){var d;return d=c.innerHTML.replace(/:[\-\w]+:/g,function(a){var c,d,e,f,g,h;f=a;for(c in b)for(e=b[c],g=0,h=e.length;h>g;g++)if(d=e[g],a=a.replace(/:/g,""),d.name===a){f='<i class="emojidex-'+d.moji+'"></i>';break}return f}),c.innerHTML=d})},b.prototype.setEmojiarea=function(b){return b.emojiarea.plaintext.emojiarea({wysiwyg:!1}),b.emojiarea.wysiwyg.emojiarea({wysiwyg:!0}),b.emojiarea.wysiwyg.on("change",function(){return b.emojiarea.value_output.text(a(this).val())}),b.emojiarea.wysiwyg.trigger("change")},b}(),a.fn[d]=function(c){return this.each(function(){return a.data(this,"plugin_"+d)?void 0:a.data(this,"plugin_"+d,new b(this,c))})}}(jQuery,window,document)}).call(this);