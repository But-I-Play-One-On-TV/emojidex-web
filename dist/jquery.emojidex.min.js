/*
 *  jQuery Emojidex - v0.1.0
 *  emojidex coffee plugin for jQuery/Zepto and compatible
 *  https://github.com/Genshin/emojidex-coffee#emojidex-coffee
 *
 *  Made by Genshin
 *  Under LGPL License
 */
(function(){!function(a){var b,c,d;return d="emojidex",c={emojiarea:{plaintext:"emojidex-plaintext",wysiwyg:"emojidex-wysiwyg",value_output:"emojidex-rawtext"}},b=function(){function b(b,e){this.element=b,this.options=a.extend({},c,e),this._defaults=c,this._name=d,this.loadEmojidexJSON(this.element,this.options),this.setEmojiarea(this.options)}return b.prototype.loadEmojidexJSON=function(c,d){return a.emojiarea.path=d.path_img,a.getJSON(d.path_json,function(d){return a.emojiarea.icons=d,b.prototype.setEmojiCSS(d),b.prototype.setEmojiIconForUTF(d,c),b.prototype.setEmojiIconForCode(d,c)})},b.prototype.setEmojiCSS=function(b){var c,d,e,f,g,h;e=a('<style type="text/css" />');for(c in b)for(f=b[c],g=0,h=f.length;h>g;g++)d=f[g],e.append("i.emojidex-"+d.moji+" {background-image: url('"+a.emojiarea.path+d.name+".svg')}");return a("head").append(e)},b.prototype.getEmojiTag=function(a){return'<i class="emojidex-'+a.moji+'"></i>'},b.prototype.setEmojiIconForUTF=function(c,d){return a.each(a(d),function(a,d){var e,f,g,h,i,j,k;i=d.innerHTML;for(e in c)for(g=c[e],j=0,k=g.length;k>j;j++)f=g[j],h=new RegExp(f.moji,"g"),i=i.replace(h,function(){return b.prototype.getEmojiTag(f)});return d.innerHTML=i})},b.prototype.setEmojiIconForCode=function(c,d){return a.each(a(d),function(a,d){var e;return e=d.innerHTML.replace(/:[\-\w]+:/g,function(a){var d,e,f,g,h,i;g=a;for(d in c)for(f=c[d],h=0,i=f.length;i>h;h++)if(e=f[h],a=a.replace(/:/g,""),e.name===a){g=b.prototype.getEmojiTag(e);break}return g}),d.innerHTML=e})},b.prototype.setEmojiarea=function(b){return b.emojiarea.plaintext.emojiarea({wysiwyg:!1}),b.emojiarea.wysiwyg.emojiarea({wysiwyg:!0}),b.emojiarea.wysiwyg.on("change",function(){return b.emojiarea.value_output.text(a(this).val())}),b.emojiarea.wysiwyg.trigger("change")},b}(),a.fn[d]=function(c){return this.each(function(){return a.data(this,"plugin_"+d)?void 0:a.data(this,"plugin_"+d,new b(this,c))})}}(jQuery,window,document)}).call(this);